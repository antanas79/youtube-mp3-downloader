<div>
	<div class="col-12 d-flex justify-content-end">
		<ng-container *ngIf="foundVideosArray.length > 0">
			<button style="height: 50px; margin-top: 15px" mat-button (click)="downloadAll()">
				Download All
			</button>
		</ng-container>
	</div>
	<form [formGroup]="form" class="col-12 p-0 d-flex flex-wrap">
		<div class="col-6 p-0">
			<div *ngIf="editableSearchArray.controls.length > 0">
				<mat-form-field>
					<input
						matInput
						formControlName="numberToTrimFromStart"
						type="number"
						placeholder="How many chars to trim from start"
					/>
					<mat-error></mat-error>
				</mat-form-field>

				<button mat-button (click)="trimStart()">Trim</button>
				<br />
				<mat-form-field>
					<input
						matInput
						formControlName="whatCharacterToTrim"
						type="text"
						placeholder="What character to trim"
					/>
					<mat-error></mat-error>
				</mat-form-field>

				<button mat-button (click)="trimCharacter()">Trim character</button>

				<br />

				<button
					*ngIf="form.value.editableSearchArray.length > 0"
					(click)="addToSearchArray()"
					mat-raised-button
				>
					Add to search array
				</button>
			</div>
			<button mat-button type="submit" style="margin: 5px" (click)="submit()">SUBMIT</button>
			<div style="background-color: white; border-color: white; padding: 5px; width: 240px">
				<mat-form-field style="height: 500px">
					<textarea
						style="height: 500px !important; width: 500px"
						matInput
						formControlName="search"
						placeholder="Enter list values separated by tab"
					></textarea>
					<mat-error></mat-error>
				</mat-form-field>
			</div>
			<div>
				<ng-container *ngIf="editableSearchArray.controls.length > 0">
					<br />
					EDITABLE SEARCHES:
					<br />
				</ng-container>
				<tr *ngFor="let search of editableSearchArray.controls, let i = index">
					<th formArrayName="editableSearchArray">
						<div [formGroupName]="i">
							{{i}} --
							<mat-form-field>
								<input matInput formControlName="searchValue" type="text" />

								<mat-error></mat-error>
							</mat-form-field>
							<button mat-button color="warn" (click)="deleteEditableSearchItem(i)">
								Delete
							</button>
						</div>
					</th>
				</tr>
				<br />
			</div>
		</div>
		<div class="col-6 p-0" *ngIf="form.value.searchArray.length > 0">
			EDITED SEARCHES:
			<div *ngIf="form.value.searchArray.length > 0">
				<tr *ngFor="let search of searchArray.controls, let i = index">
					<th formArrayName="searchArray">
						<div [formGroupName]="i">
							{{i}} --
							<mat-form-field>
								<input matInput formControlName="searchValue" type="text" />

								<mat-error></mat-error>
							</mat-form-field>
							<button mat-button color="warn" (click)="deleteSearchItem(i)">Delete</button>
						</div>
					</th>
				</tr>
				<br />
				<br />
				<button (click)="search()" mat-raised-button>Search</button>
			</div>

			<br />
			<br />
		</div>

		<ng-container *ngIf="foundVideosArray.length > 0">
			<br />
			<br />
			FOUND VIDEOS:
			<div class="d-flex col-12 p-0">
				<div class="border-top border-bottom mb-2 d-flex align-items-center col-12 p-0">
					<div class="col-3">Prog</div>
					<div class="col-3">Searched item</div>
					<div class="col-3">Found youtube item title</div>
					<div class="col-3">Move/delete</div>
				</div>
			</div>
			<div class="d-flex col-12 p-0" *ngFor="let video of foundVideosArray; let i = index;">
				<div
					class="border-top border-bottom mb-2 d-flex align-items-center col-12 p-0"
					[ngClass]="{'downloading': !foundVideosArray[i].downloaded, 'downloaded': foundVideosArray[i].downloaded, 'error': foundVideosArray[i].error, notStarted: !foundVideosArray[i].error && !foundVideosArray[i].downloaded}"
				>
					<div class="col-3" style="padding: 10px">
						{{!foundVideosArray[i].downloaded && !foundVideosArray[i].error ? 'Download not
						initiated, Press "Download All"' : (foundVideosArray[i].error ? 'Error' :
						(foundVideosArray[i].downloaded ? 'Downloaded' : 'Downloading' ))}}
						<!-- <ng-container *ngIf="env === 'github' && mode !== 'instant-download' ">
							<iframe
								[src]="foundVideosArray[i].githubIframeUrl"
								width="100%"
								height="100%"
								allowtransparency="true"
								scrolling="no"
								style="border: none"
							></iframe>
						</ng-container> -->
					</div>
					<div>
						<a
							class="col-3"
							href="{{youtubeLinkFirstPart}}{{foundVideosArray[i].videoId}}"
							target="_blank"
							>{{foundVideosArray[i].title}}</a
						>
						- {{foundVideosArray[i].title}}
					</div>

					<div class="col-3">{{foundVideosArray[i].title}}</div>
					<div class="col-3 d-flex">
						<button
							(click)="moveToIncorrectList(i)"
							mat-raised-button
							color="accent"
							class="mr-1"
						>
							Move To Incorrect
						</button>
						<button (click)="deleteFound(i)" mat-raised-button color="warn">Delete</button>
					</div>
				</div>
			</div>

			<div class="mt-3 pt-3" *ngIf="incorrectArray.length > 0">
				INCORRECT SEARCHES:
				<tr *ngFor="let search of incorrectArray, let i = index">
					<th>{{search}}</th>
				</tr>
				<br />
				<br />
			</div>
		</ng-container>
	</form>

	<div class="mt-3 pt-3" *ngIf="succesfullDownloads.length > 0">
		SUCCESFULL DOWNLOADS HISTORY
		<tr *ngFor="let search of succesfullDownloads, let i = index">
			{{search.title}}
		</tr>
		<br />
		<br />
	</div>
	<div class="mt-3 pt-3" *ngIf="erroredDownloads.length > 0">
		ERRORED DOWNLOADS HISTORY
		<tr *ngFor="let search of erroredDownloads, let i = index">
			{{search.title}}
		</tr>
		<br />
		<br />
	</div>
</div>
