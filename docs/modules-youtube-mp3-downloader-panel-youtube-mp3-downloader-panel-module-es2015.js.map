{"version":3,"sources":["./src/app/modules/youtube-mp3-downloader-panel/youtube-mp3-downloader-panel.routing.module.ts","./src/app/modules/youtube-mp3-downloader-panel/components/loader/loader.component.html","./src/app/modules/youtube-mp3-downloader-panel/components/loader/loader.component.ts","./src/app/modules/youtube-mp3-downloader-panel/youtube-mp3-downloader-panel.module.ts"],"names":[],"mappings":"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","file":"modules-youtube-mp3-downloader-panel-youtube-mp3-downloader-panel-module-es2015.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { YoutubeMp3DownloaderPanelComponent } from \"./pages/youtube-mp3-downloader-panel/youtube-mp3-downloader-panel.component\";\n\nconst routes: Routes = [\n\t{\n\t\tpath: \"\",\n\t\tcomponent: YoutubeMp3DownloaderPanelComponent\n\t}\n];\n\n@NgModule({\n\timports: [RouterModule.forChild(routes)],\n\texports: [RouterModule]\n})\nexport class YoutubeMp3DownloaderPanelRoutingModule {}\n","<div>\n\t<button id=\"downloadButton\" style=\"color: red\">Download progress {{progress || 0}} / 100%</button>\n\t<ng-container *ngIf=\"downloadUrl\">\n\t\t<a\n\t\t\tid=\"{{youtubeVideoId}}\"\n\t\t\thref=\"{{downloadUrl}}\"\n\t\t\tid=\"download\"\n\t\t\tstyle=\"margin: 0 auto; display: flex; align-self: center\"\n\t\t>\n\t\t\tDownloaded\n\t\t</a></ng-container\n\t>\n</div>\n","import { Component, HostListener, Input, OnChanges, OnInit, SimpleChanges } from \"@angular/core\";\n\n@Component({\n\tselector: \"app-loader\",\n\ttemplateUrl: \"./loader.component.html\",\n\tstyleUrls: [\"./loader.component.scss\"]\n})\nexport class LoaderComponent implements OnInit, OnChanges {\n\t@Input() passedUrl: string;\n\t@Input() shouldStartDownload = false;\n\tbuttonTitle: string;\n\tlink_now: URL;\n\tformat: string;\n\tyoutubeVideoId: string;\n\tprogress: number;\n\tdownloadUrl = \"\";\n\t@HostListener(\"window:message\", [\"$event\"])\n\tonMessage(event) {\n\t\tif (event.data.shouldStartDownload) {\n\t\t\tthis.download();\n\t\t}\n\t}\n\t// constructor() {\n\t// \tif (window.addEventListener) {\n\t// \t\twindow.addEventListener(\"message\", this.download.bind(this), false);\n\t// \t} else {\n\t// \t\t(<any>window).attachEvent(\"onmessage\", this.download.bind(this));\n\t// \t}\n\t// }\n\n\tngOnInit(): void {\n\t\t//@ts-ignore\n\t\tthis.link_now = new URL(this.passedUrl.changingThisBreaksApplicationSecurity);\n\t\tthis.youtubeVideoId = this.link_now.searchParams.get(\"youtubeVideoId\");\n\t\tthis.format = this.link_now.searchParams.get(\"f\");\n\t\tthis.buttonTitle = JSON.stringify(this.link_now);\n\t}\n\n\tngOnChanges(changes: SimpleChanges): void {\n\t\tif (changes.shouldStartDownload.currentValue && !changes.shouldStartDownload.previousValue) {\n\t\t\tthis.download();\n\t\t}\n\t}\n\n\tdownload() {\n\t\tfetch(\n\t\t\t\"https://loader.to/ajax/download.php?button=1&start=1&end=1&format=\" +\n\t\t\t\tthis.format +\n\t\t\t\t\"&url=\" +\n\t\t\t\t//@ts-ignore\n\t\t\t\tencodeURIComponent(this.link_now),\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/json\"\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((response) => {\n\t\t\t\tthis.showProgressAndSetDownloadUrl(response.id);\n\t\t\t});\n\t}\n\n\tshowProgressAndSetDownloadUrl(i: number | string) {\n\t\tfetch(\"https://loader.to/ajax/progress.php?id=\" + i, {\n\t\t\theaders: {\n\t\t\t\tAccept: \"application/json\"\n\t\t\t}\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((response) => {\n\t\t\t\tthis.progress = response.progress / 10;\n\t\t\t\tif (response.download_url != null && response.success == 1) {\n\t\t\t\t\twindow.parent.postMessage(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tyoutubeVideoId: this.youtubeVideoId,\n\t\t\t\t\t\t\tdownloaded: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"*\"\n\t\t\t\t\t);\n\t\t\t\t\tthis.downloadUrl = response.download_url;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//@ts-ignore\n\t\t\t\tsetTimeout(this.showProgressAndSetDownloadUrl(i), 750);\n\t\t\t})\n\t\t\t.catch((\n\t\t\t\te //@ts-ignore\n\t\t\t) => setTimeout(this.showProgressAndSetDownloadUrl(i), 750));\n\t}\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { YoutubeMp3DownloaderPanelRoutingModule } from \"./youtube-mp3-downloader-panel.routing.module\";\nimport {\n\tgoogleApiWindow,\n\tYoutubeMp3DownloaderPanelComponent\n} from \"./pages/youtube-mp3-downloader-panel/youtube-mp3-downloader-panel.component\";\nimport { SharedModule } from \"../shared/shared.module\";\nimport { LoaderComponent } from \"./components/loader/loader.component\";\n\n@NgModule({\n\tdeclarations: [YoutubeMp3DownloaderPanelComponent, LoaderComponent],\n\timports: [CommonModule, SharedModule, YoutubeMp3DownloaderPanelRoutingModule],\n\tproviders: [{ provide: googleApiWindow, useValue: window }]\n})\nexport class YoutubeMp3DownloaderPanel {}\n"],"sourceRoot":"webpack:///"}